from selenium.webdriver.firefox.options import Options
from selenium.webdriver.common.keys import Keys
from selenium import webdriver
import time

def amazon_finder(email):
    options = Options()
    options.binary_location = r'C:\Program Files\Mozilla Firefox\firefox.exe'
    browser = webdriver.Firefox(executable_path=r'geckodriver.exe', options=options)
    browser.get('https://www.amazon.fr/ap/signin?_encoding=UTF8&accountStatusPolicy=P1&openid.assoc_handle=frflex&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.pape=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.pape.max_auth_age=0&openid.return_to=https%3A%2F%2Fwww.amazon.fr%2Fgp%2Fcss%2Forder-history%3Fie%3DUTF8%26ref_%3Dnav_orders_first&pageId=webcs-yourorder&showRmrMe=1')

    time.sleep(1)

    input_xpath = '/html/body/div[1]/div[1]/div[2]/div/div[2]/div/div[1]/form/div/div/div/div[1]/input[1]'
    input_field = browser.find_element_by_xpath(input_xpath)
    input_field.send_keys(email)
    input_field.send_keys(Keys.ENTER)

    time.sleep(1)

    if browser.find_elements_by_xpath('/html/body/div[1]/div[1]/div[2]/div/div[1]/div/div/div/h4'):
        browser.close()
        return {'Amazon' : 'False'}
    else:
        browser.close()
        return {'Amazon' : 'True'}
